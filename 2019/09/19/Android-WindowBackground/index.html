<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">

    

    
    <title>[Android] WindowBackground | VictoryWoo</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="Android,Window Background">
    
    <link rel="stylesheet" href="https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theeluwin/NotoSansKR-Hestia@master/stylesheets/NotoSansKR-Hestia.css">
    <meta name="description" content="아래의 글을 읽어보면 어떻게 drawing을 더 빠르게 하고, activity의 시작 시간을 단축시킬 수 있는지 알 수 있다. 이는 window background drawable과 관련이 있다.  setContentView()를 통해 Activity에 View를 붙이면, 이 View는 activity의 window에 붙게 된다. 하지만, window는 s">
<meta name="keywords" content="Android,Window Background">
<meta property="og:type" content="article">
<meta property="og:title" content="[Android] WindowBackground">
<meta property="og:url" content="http://victorywoolee/victorywoolee.github.io/2019/09/19/Android-WindowBackground/index.html">
<meta property="og:site_name" content="VictoryWoo">
<meta property="og:description" content="아래의 글을 읽어보면 어떻게 drawing을 더 빠르게 하고, activity의 시작 시간을 단축시킬 수 있는지 알 수 있다. 이는 window background drawable과 관련이 있다.  setContentView()를 통해 Activity에 View를 붙이면, 이 View는 activity의 window에 붙게 된다. 하지만, window는 s">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://victorywoolee/image/decorview.png">
<meta property="og:updated_time" content="2019-09-19T11:44:09.018Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[Android] WindowBackground">
<meta name="twitter:description" content="아래의 글을 읽어보면 어떻게 drawing을 더 빠르게 하고, activity의 시작 시간을 단축시킬 수 있는지 알 수 있다. 이는 window background drawable과 관련이 있다.  setContentView()를 통해 Activity에 View를 붙이면, 이 View는 activity의 window에 붙게 된다. 하지만, window는 s">
<meta name="twitter:image" content="http://victorywoolee/image/decorview.png">
    

    
        <link rel="alternate" href="/" title="VictoryWoo" type="application/atom+xml">
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>
</html>
<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">VictoryWoo&#39;s Blog</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Android/">Android</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Clean-Code/">Clean Code</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/ETC/">ETC</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Git/">Git</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Kotlin/">Kotlin</a></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Android/">Android</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-Android-WindowBackground" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        [Android] WindowBackground
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2019/09/19/Android-WindowBackground/" class="article-date">
            <time datetime="2019-09-19T10:47:44.000Z" itemprop="datePublished">2019-09-19</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Android/">Android</a>, <a class="tag-link" href="/tags/Window-Background/">Window Background</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>아래의 글을 읽어보면 어떻게 drawing을 더 빠르게 하고, activity의 시작 시간을 단축시킬 수 있는지 알 수 있다. 이는 <code>window background drawable</code>과 관련이 있다. </p>
<p>setContentView()를 통해 Activity에 View를 붙이면, 이 View는 activity의 window에 붙게 된다. 하지만, window는 setContentView()를 통해 붙인 뷰만 붙이는 것이 아니다. 가장 중요한 것 중 하나인 <code>DecorView</code>를 붙이게 된다. </p>
<img src="/image/decorview.png">

<p>DecorView는 window의 background Drawable을 가지고 있는 View다. getWindows().setBackgroundDrawable()을 호출하는 것은 실제로 DecorView의 background를 변경하여 window의 background가 변경되는 것과 같은 효과를 낸다. 하지만 이같은 설정은 추후에 version 혹은 device에 따라 달라질 수 있다.</p>
<p>기본 <strong>android theme</strong>를 사용한다면 default background drawable이 activity에 설정되어있다. 기본적으로는 ColorDrawable이 설정되어있다. 보통의 앱에서는 이 ColorDrawable이 DecorView에 설정되어 있는게 문제가 안된다. 하지만, drawing performance에는 영향을 줄 수도 있다. </p>
<p>아래는 불투명 그림이 activity 전체에 설정되어 있는 경우다. </p>
<img src="/image/image1.png">

<p>그림에서 window background가 보이지 않는 것을 확인할 수 있다. 전부 불투명한 그림을 담고 있는 ImageView로 덮여있기 때문이다. 이 앱은 44fps가 나온다. 더 빨리 그리게 하기 위해서는 background drawable을 제거해주면 된다. 그림이 불투명이며 화면 전체를 차지하기 때문에 background는 낭비일 뿐이다. background를 제거함으로써 더 나은 퍼포먼스를 얻을 수 있다.</p>
<img src="/image/image2.png">

<p>background를 제거한 버전에서는 51fps가 나온다. 만약 default window backgroun가 더 큰 용량의 drawable일 경우에는 그 차이가 더 확연하게 난다. </p>
<p>window background를 없애는 것은 custom theme를 적용하면 간단하게 해결된다.<br>res/values/theme.xml을 만들고 아래와 같이 정의하면 된다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Theme.NoBackground"</span> <span class="attr">parent</span>=<span class="string">"android:Theme"</span>&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowBackground"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>위와 같은 theme을 activity나 application의 theme로 적용해주면 된다. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:theme=&quot;@style/Theme.NoBackground&quot;</span><br></pre></td></tr></table></figure>

<p>MapView나 WebView 같은 경우도 보통 activity를 꽉 채우며 불투명하기 때문에 이런 theme를 사용하는게 좋다. </p>
<p>이 방법은 Android UI toolkit이 가려진 drawable을 그리지 않을만큼 똑똑하지는 않기 때문이다. 보통 android application에서 이렇게 full screen 전부가 불투명한 경우가 많지 않기 때문에 이런 최적화를 framework 단에서 하지 않았다. 하지만 이것은 추후 구현에서 자동으로 그리지 않도록 최적화될 수 있다.</p>
<p>전체 바탕을 theme으로 설정함으로서 activity의 시작 시간을 단축시킬수 있는 것도 좋은 방법이다. 아래와 같은 상황이 적절한 예가 될 수 있다.</p>
<img src="/image/image3.png">

<p>위와 같은 background가 onCreate에서 설정되거나 XML layout을 통해서 설정되었다면 activity의 시작은 처음에 검은 배경이 나온 후 해당 그림으로 바뀌는 방식으로 이루어질 것이다. 사용자는 이 background를 로드하는데 시간이 걸린다고 느낄 것이며, 깜빡이는 경험도 할 것이다.</p>
<p>이렇게 하는 대신 theme로 설정해서 custom backgrounㅇ를 깔아주면 activity의 시작시간도 단축할 수 있고, 이렇게 깜빡이는 느낌도 없앨 수 있다. </p>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a href="https://aroundck.tistory.com/676" target="_blank" rel="noopener">[Android/안드로이드] Window Backgrounds &amp; UI Speed</a></li>
</ul>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://victorywoolee/victorywoolee.github.io/2019/09/19/Android-WindowBackground/" data-id="ck3mhpvxc000v0r3rz2w8yowp" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Victory Woo"
        },
        "headline": "[Android] WindowBackground",
        "image": "http://victorywoolee/victorywoolee.github.io/image/decorview.png",
        "keywords": "Android Window Background",
        "genre": "Android",
        "datePublished": "2019-09-19",
        "dateCreated": "2019-09-19",
        "dateModified": "2019-09-19",
        "url": "http://victorywoolee/victorywoolee.github.io/2019/09/19/Android-WindowBackground/",
        "description": "아래의 글을 읽어보면 어떻게 drawing을 더 빠르게 하고, activity의 시작 시간을 단축시킬 수 있는지 알 수 있다. 이는 window background drawable과 관련이 있다. 
setContentView()를 통해 Activity에 View를 붙이면, 이 View는 activity의 window에 붙게 된다. 하지만, window는 s",
        "wordCount": 403
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/victorywoolee" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2019/09/19/Android-DI/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            [Android] DI - Dagger2
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2019/09/16/What-is-GNB/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">[ETC] GNB</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Clean-Code/">Clean Code</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ETC/">ETC</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">19</span></li></ul>
        </div>
    </div>


            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Kotlin/">Kotlin</a></p>
                            <p class="item-title"><a href="/2019/12/01/Kotlin-NAN/" class="title">[Kotlin] NaN?</a></p>
                            <p class="item-date"><time datetime="2019-12-01T04:09:55.000Z" itemprop="datePublished">2019-12-01</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Kotlin/">Kotlin</a></p>
                            <p class="item-title"><a href="/2019/12/01/Chap8/" class="title">[Kotlin] 고차 함수</a></p>
                            <p class="item-date"><time datetime="2019-12-01T01:54:13.000Z" itemprop="datePublished">2019-12-01</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Clean-Code/">Clean Code</a></p>
                            <p class="item-title"><a href="/2019/11/30/CleanCode13/" class="title">[CleanCode] 13장</a></p>
                            <p class="item-date"><time datetime="2019-11-30T04:55:29.000Z" itemprop="datePublished">2019-11-30</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Kotlin/">Kotlin</a></p>
                            <p class="item-title"><a href="/2019/11/24/Chap7-5/" class="title">[Kotlin] 위임 프로퍼티</a></p>
                            <p class="item-date"><time datetime="2019-11-24T05:19:15.000Z" itemprop="datePublished">2019-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Kotlin/">Kotlin</a></p>
                            <p class="item-title"><a href="/2019/11/24/Chap7-4/" class="title">[Kotlin] 구조 분해 선언과 Component 함수</a></p>
                            <p class="item-date"><time datetime="2019-11-24T04:56:35.000Z" itemprop="datePublished">2019-11-24</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">19</span></li></ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2019 Victory Woo</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://victorywoolee/victorywoolee.github.io/2019/09/19/Android-WindowBackground/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
